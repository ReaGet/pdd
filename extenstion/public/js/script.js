(()=>{let e={};chrome.runtime.onMessage.addListener((function(t,n,o){const s=localStorage.getItem("tests");e=s?JSON.parse(s):{};const{name:r,action:c,title:u}=t;console.log(r,c),"parse"===c?function(t,n){const o={title:n,test:[]};document.querySelectorAll(".advq_question_container").forEach((e=>{o.test.push(function(e){const t=e.querySelector(".advq_question").innerText,n=e.querySelector(".advq_question_image img")?.getAttribute("src");return{name:t,image:n,buttons:[...e.querySelectorAll(".quiz_unselected_answer")].reduce(((e,t,n)=>{const o=`${n+1}) ${t.querySelector("label").innerText}`,s="1"==t.querySelector("input").getAttribute("data-rule");return e.push({text:o,seccess:s}),e}),[])}}(e))})),e[t]||(e[t]=[]),e[t].push(o),localStorage.setItem("tests",JSON.stringify(e))}(r,u):function(){const t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","tests.json"),document.body.appendChild(n),n.click()}()}))})();